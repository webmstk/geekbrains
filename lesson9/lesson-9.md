### Задания к занятию 9

* Rake задачи
* Глобальные переменные
* Переменные класса



#### 1. Грабли для сборки Gem-а

Напишите rake задачи `build`, `install` и `publish` для сборки, установки и публикации (на http://rubygems.org) Gem-а `running_track`.



#### 2. Rake задачи для создания плейлиста

Напишите rake задачи `playlist:create` и `playlist:update` для создания и обновления плейлиста, а также `playlist:list` для отображения списка всех плейлистов (только названия файлов).

Идея задания основывается на зависимости между временем модификации файла плейлиста и временем модификации музыкальных файлов. В Rake для управления этой зависимостью используется метод `file` (мы рассматривали его в конце занятия).

* Для того чтобы получить список всех файлов в музыкальном каталоге используйте метод `Dir::[]` с аргументом `music/**/*`

* Предусмотрите передачу параметра `NAME` из командной строки в rake задачу с именем плейлиста. Если параметр отсутствует создавайте плейлист с каким-то генерируемым именем

* При попытке вызвать задачу `rake playlist:update` без параметра `NAME` выводите сообщение о том что требуемый параметр не задан

* Используйте формат плейлиста [M3U]

* Для простоты не указывайте длину композиции в секундах. Для этого в плейлисте укажите `-1`

##### Примеры вызова rake задач

```
# Получить список всех плейлистов
rake playlist:list

# Обновить плейлист ambient.m3u
NAME=ambient.m3u rake playlist:update

# Обновить плейлист без указания его названия
rake playlist:update # => Не могу обновить плейлист потому что не знаю его названия. Укажите название плейлиста с помощью переменной окружения NAME

# Создать плейлист
rake playlist:create # => Будет создан файл playlist_2016-01-01.m3u
```

##### Пример файла плейлиста в формате `M3U`

```
#EXTM3U
#EXTINF:-1,above & beyond - robot heart yoga - burning man 2014.mp3
file:///Users/psylone/Downloads/Sound Cloud/Above & Beyond - Robot Heart Yoga - Burning Man 2014.mp3
#EXTINF:-1,Atmospheric world mix 002
file:///Users/psylone/Music/Bryan Milton - Atmospheric world mix 002 (promodj.com).mp3
```

##### Предварительный шаблон rake задач

```ruby
namespace :playlist do

  desc ''
  task :list do

  end

  desc ''
  task :create do

  end

  desc ''
  # Задача update зависит от имени плейлиста которое передаётся в переменной окружения NAME из командной строки
  task update: ENV['NAME']

end
```


<!-- Links -->

[M3U]: https://habrahabr.ru/sandbox/25319/
